# 운영체제

**Contents**

- [운영체제란](#운영체제란)
- [프로세스와 스레드](#프로세스와-스레드)
- [스케줄러](#스케줄러)

## 운영체제란

하드웨어와 사용자(와 각종 소프트웨어) 사이를 연결하는 소프트웨어 계층이다.
운영체제도 소프트웨어이기 때문에 컴퓨터 전원이 켜지면 메모리에 운영체제를 올리는 작업을 한다.
하지만 운영체제의 크기는 매우 크기 때문에 핵심적인 부분만 먼저 올리고 나머지 소프트웨어는 필요할 때 메모리에 올려서 사용한다.
전원이 들어오고 부터 메모리에 항상 올려져 있는 운영체제를 `커널`이라고 한다.

### 운영체제의 역할

1. 컴퓨터의 자원(cpu, 메모리, 하드 디스크, 소프트웨어 자원)을 효율적으로 관리하는 역할
2. 사용자 인터페이스 제공

## 프로세스와 스레드

### 프로세스

현재 실행중인 프로그램으로 운영체제로부너 주소공간, 파일, 메모리 등을 할당받는다.
`프로세스 스택`, `데이터 섹션`, `힙`을 포함한다.
운영체제는 프로세스를 생성할 때 `프로세스 제어 블록(PCB)`를 함께 생성한다.
**PCB에 저장되는 내용 **

> 프로그램을 실행시킬 때 프로세스로 실행하는 이유는?

### 스레드

스레드는 한 프로세스 안에서 동작하는 실행 흐름들을 의미한다.
스레드는 프로세스 내의 공간/자원을 공유한다. (코드, 데이터 섹션, 파일, 신호 등등의 운영체제 자원)

**스택을 스레드마다 독립적으로 할당하는 이유는?**

스레드는 독립적인 작업이 가능해야 하기 때문이다.
스택은 되돌아갈 주소값이나 변수 등을 저장하는 곳이다. 이런 스택 공간이 독립적이어냐 독립적인 실행 context를 가질 수 있고 독립적인 실행이 가능하게 된다.

> 스레드도 context-switching을 하는가?

|      | 멀티 스레드                               | 멀티 프로세스                                              |
| ---- | ----------------------------------------- | ---------------------------------------------------------- |
| 장점 | 적은 memory 차지,문맥 전환이 빠름         | 한 프로세스가 죽어도 다른 프로세스에는 영향이 가지 않는다. |
| 단점 | 공유자원이 망가질 경우 모든 스레드에 영향 | 많든 memory와 cpu 차지                                     |

## 스케줄러

### 스케줄링

프로세스가 실행 될 때 필요한 시스템 자원을 할당해주는 작업이다.

프로세스를 스케줄링하기 위한 큐는 3가지가 있다.

- Job Queue: 현재 시스템에 있는 모든 process들이 있다.
- Ready Queue: CPU를 할당받기 위해 `대기`중인 process들이 있다.
- Divice Queue: Device I/O작업을 대기중인 process들이 있다.

이 큐들에 process를 넣고 빼는 스케줄러도 3가지가 있다.

- 장기 스케줄러(Job Schduler)

  어떤프로세스에게 시스템 자원을 줄지 결정해 Ready Queue로 보낸다

  `new` -> `ready`

- 중기 스케줄러 (Swapper)

  메모리에 너무 많은 프로세스가 올라가지 않게 조절해주는 역할을 한다. 프로세스를 메모리에서 swap한다.

  `ready` -> `suspend`

- 후기 스케줄러 (CPU Schduler)

  Ready Queue에 있는 프로세스 중 어떤걸 running시킬지 결정한다.

  `ready` -> `running` -> `waiting` -> `ready`

### CPU Schduler 스케줄링 기법

**비선점 스케줄링**

프로세스가 CPU를 할당받으면 다른 프로세스가 강제로 뺏어서 사용할 수 없는(비선점) 방법이다.
그 말은 프로세스 작업이 끝날 때 까지 해당 자원을 사용한다는 것이다.

종류: `FCFS`, `SJF`, `비선점 우선순위`

**선점 스케줄링**

우선순위가 더 높은 프로세스가 강제로 CPU를 뺏어서(선점) 사용할 수 있다. 많은 오버헤드가 생길 수 있다.

종류: `Round Robin`, `SRT`, `선점 우선순위`

## 프로세스 동기화

## 메모리 관리
